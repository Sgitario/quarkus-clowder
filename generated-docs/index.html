<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Clowder Extension for Quarkus</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body id="clowder-extension-for-quarkus" class="article">
<div id="header">
<h1>Clowder Extension for Quarkus</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/RedHatInsights/clowder">Clowder</a> is a kubernetes operator designed to make it easy to deploy
applications running on the cloud.redhat.com platform in production, testing and local development environments.</p>
</div>
<div class="paragraph">
<p>When deploying a Quarkus service on the cloud, the Clowder operator provides a config file that the services need
to use for configuring the datasource, kafka, logging, etc. The clowder config file looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">adminPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">s3cr3t</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">adminUsername</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">postgres</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">some.host</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">some-db</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">secret</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">15432</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">sslMode</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">require</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">aUser</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">endpoints</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">app</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">notifications</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">n-api.svc</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">api</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">8000</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">app</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">notifications</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">n-gw.svc</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">gw</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">8000</span>
    }
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">kafka</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">brokers</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ephemeral-host.svc</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">29092</span>
      }
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">topics</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">platform-tmp-12345</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">requestedName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">platform.notifications.ingress</span><span class="delimiter">&quot;</span></span>
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">platform-tmp-666</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">requestedName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">platform.notifications.alerts</span><span class="delimiter">&quot;</span></span>
      }
    ]
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">logging</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">cloudwatch</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">accessKeyId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my-key-id</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">logGroup</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">my-log-group</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">region</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">eu-central-1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">secretAccessKey</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">very-secret</span><span class="delimiter">&quot;</span></span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">cloudwatch</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">metricsPath</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/metrics</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">metricsPort</span><span class="delimiter">&quot;</span></span>: <span class="integer">9000</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">privatePort</span><span class="delimiter">&quot;</span></span>: <span class="integer">10000</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">publicPort</span><span class="delimiter">&quot;</span></span>: <span class="integer">8000</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">webPort</span><span class="delimiter">&quot;</span></span>: <span class="integer">8000</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This extension eases the integration with the Clowder configuration by loading the file and autoconfiguring some extensions like Quarkus datasource and Quarkus messaging.</p>
</div>
<div class="paragraph">
<p>Before getting started, make sure you&#8217;re using the right Quarkus Clowder version that is compatible with the Quarkus version you&#8217;re using in your project. See the following table to see the compatibility among versions:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quarkus Clowder Version</th>
<th class="tableblock halign-left valign-top">Quarkus Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus 3.7.0+</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="usage-clowder"><a class="anchor" href="#usage-clowder"></a>Using the Clowder Extension</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>roughly 10 minutes</p>
</li>
<li>
<p>JDK 17+ installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
<li>
<p>Apache Maven 3.8.1+</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="create-a-quarkus-application-with-the-clowder-extension"><a class="anchor" href="#create-a-quarkus-application-with-the-clowder-extension"></a>Create a Quarkus application with the Clowder extension</h3>
<div class="paragraph">
<p>In this example, we&#8217;ll create a Quarkus application with the Quarkus Clowder extension by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn io.quarkus.platform:quarkus-maven-plugin:3.9.0:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=clowder-quickstart \
    -DclassName=&quot;org.acme.quickstart.GreetingResource&quot; \
    -Dpath=&quot;/hello&quot; \
    -Dextensions=&quot;resteasy-reactive,clowder&quot;
cd clowder-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you already have your Quarkus project configured, you can add the <code>clowder</code> extension to your project by running the following command in your project base directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./mvnw quarkus:add-extension -Dextensions=&quot;clowder&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will add the following dependency to your <code>pom.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>io.quarkiverse.clowder<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>quarkus-clowder<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>0.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, you need to configure the location where the clowder config file will be located when running the service. The default location is <code>/cdapp/cdappconfig.json</code> but it can be configured by using the <code>quarkus.clowder.config-path</code> property.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add a simple clowder config file named <code>cdappconfig.json</code> at <code>src/main/resources</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">adminPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">s3cr3t</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">adminUsername</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">postgres</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">some.host</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">some-db</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">secret</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">15432</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">sslMode</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">require</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">aUser</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">webPort</span><span class="delimiter">&quot;</span></span>: <span class="integer">8000</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configure our application to use it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">quarkus.clowder.config-path=src/main/resources/cdappconfig.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Automatically, the extension will expose all the properties within the clowder config file using the prefix <code>clowder.</code>. So, let&#8217;s add a service that displays the database name as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Endpoint</span> {

    <span class="annotation">@ConfigProperty</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">clowder.database.name</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">String</span> databaseName;

    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/database/name</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getDatabaseName() {
        <span class="keyword">return</span> databaseName;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, let&#8217;s run our service in Quarkus DEV mode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally, we&#8217;ll see the expected value by hitting the <code>/database/name</code> endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl localhost:8000/database/name
some-db</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note</strong>: The Quarkus service will be listening on port 8000 because the Clowder file contains <code>webPort: 8000</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datasource-configuration"><a class="anchor" href="#datasource-configuration"></a>Datasource Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus Clowder configuration will automatically configure the Hibernate ORM or Hibernate Reactive extensions.
All you need is to provide the datasource configuration in the clowder config file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">adminPassword</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">s3cr3t</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">adminUsername</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">postgres</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">some.host</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">some-db</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">secret</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">15432</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">sslMode</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">require</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">aUser</span><span class="delimiter">&quot;</span></span>
  },
  <span class="error">.</span><span class="error">.</span><span class="error">.</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Plus, configure the <code>db-kind</code> to use (this is a mandatory property for Quarkus):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">quarkus.datasource.db-kind=postgresql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, the Quarkus Clowder extension will detect which Hibernate ORM or Hibernate Reactive is in use and configure the JDBC connection accordingly.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: In case of you&#8217;re using other <code>db-kind</code> than <code>postgresl</code> or you don&#8217;t have any Quarkus Hibernate extension, then the Quarkus Clowder extension will do nothing since Clowder only supports postgresql.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kafka-configuration"><a class="anchor" href="#kafka-configuration"></a>Kafka Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus Clowder configuration will automatically configure the Kafka bootstrap servers, plus it will provide some properties to expose the topics from the Clowder config file.
All you need is to provide the kafka configuration in the clowder config file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">kafka</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">brokers</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">29092</span>
      }
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">topics</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">platform-tmp-12345</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">requestedName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">platform.notifications.ingress</span><span class="delimiter">&quot;</span></span>
      }
    ]
  },
  <span class="error">.</span><span class="error">.</span><span class="error">.</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the above configuration, the Quarkus Clowder extension will autoconfigure the <code>kafka.bootstrap.servers</code> property and, additionally, it will expose the configured topics as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">mp.messaging.incoming.prices.connector=smallrye-kafka
mp.messaging.incoming.prices.topic=${clowder.kafka.topics.&quot;platform.notifications.ingress&quot;.name}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The property <code>clowder.kafka.topics."platform.notifications.ingress".name</code> will have the value <code>platform-tmp-12345</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="endpoints-configuration"><a class="anchor" href="#endpoints-configuration"></a>Endpoints Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Clowder configuration includes the endpoints configuration that the service needs. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="error">.</span><span class="error">.</span><span class="error">.</span>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">endpoints</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">api</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">app</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">notifications</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">service.host1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">8081</span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">api</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">app</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">another</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">hostname</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">service.host2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span>: <span class="integer">8081</span>
    }
  ],
  <span class="error">.</span><span class="error">.</span><span class="error">.</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use the above endpoints in Quarkus, you generally need either the Quarkus REST Client Reactive or the Quarkus REST Client Legacy extensions. Then, when any of these extensions are present, the Quarkus Clowder extension will autoconfigure these REST Clients automatically by using the URL provided from the Clowder configuration file.
For example, let&#8217;s add the following REST Client interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">io.quarkiverse.clowder.tests.endpoints</span>;

<span class="keyword">import</span> <span class="include">jakarta.ws.rs.GET</span>;
<span class="keyword">import</span> <span class="include">jakarta.ws.rs.Path</span>;

<span class="keyword">import</span> <span class="include">org.eclipse.microprofile.rest.client.inject.RegisterRestClient</span>;

<span class="annotation">@RegisterRestClient</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/database/name</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">AnotherApi</span> {

    <span class="annotation">@GET</span>
    <span class="predefined-type">String</span> getDatabaseName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, we want to use the Clowder endpoint configuration with app "another" and name "api", so we would need to add the following property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">quarkus.clowder.endpoints.&quot;another.api&quot;.client=io.quarkiverse.clowder.tests.endpoints.AnotherApi</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the Quarkus Clowder extension will autoconfigure the REST Client URL and the certification configuration if needed.</p>
</div>
<div class="paragraph">
<p>Another option to generate the REST Client is via <a href="https://docs.quarkiverse.io/quarkus-openapi-generator/dev/index.html">the Quarkus OpenAPI generator</a> extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.quarkiverse.openapi.generator<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>quarkus-openapi-generator<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>...<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When using this method, you need to provide the openapi definition at the <code>src/main/openapi</code> folder. For example, let&#8217;s add the <code>notifications_api.yaml</code> file with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">openapi</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">3.0.2</span><span class="delimiter">&quot;</span></span>
<span class="key">info</span>:
  <span class="key">title</span>: <span class="string"><span class="content">Test API</span></span>
  <span class="key">version</span>: <span class="string"><span class="content">1.0.0</span></span>

<span class="key">paths</span>:
  <span class="key">/database/name</span>:
    <span class="key">get</span>:
      <span class="key">operationId</span>: <span class="string"><span class="content">getDatabaseName</span></span>
      <span class="key">responses</span>:
        <span class="key"><span class="delimiter">'</span><span class="content">200</span><span class="delimiter">'</span></span>:
          <span class="key">description</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Returned database name.</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When building the service, the REST Client interface will be automatically generated and by default it will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
  * Test API
  * &lt;p&gt;No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)&lt;/p&gt;
  */</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/database/name</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RegisterRestClient</span>( configKey=<span class="string"><span class="delimiter">&quot;</span><span class="content">notifications_api_yaml</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@GeneratedClass</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">notifications_api.yaml</span><span class="delimiter">&quot;</span></span>, tag = <span class="string"><span class="delimiter">&quot;</span><span class="content">Default</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">DefaultApi</span> {

    <span class="annotation">@GET</span>
    <span class="annotation">@GeneratedMethod</span> (<span class="string"><span class="delimiter">&quot;</span><span class="content">getDatabaseName</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> jakarta.ws.rs.core.Response getDatabaseName(
    );

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, if the openapi definition file matches the following convention <code>&lt;clowder endpoint app&gt;_&lt;clowder endpoint name&gt;.yaml</code>, the Quarkus Clowder extension will autoconfigure everything by you, so you don&#8217;t need to add any configuration at all.</p>
</div>
<div class="paragraph">
<p>Note that both methods are perfectly compatible with each other at the same time.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metrics-configuration"><a class="anchor" href="#metrics-configuration"></a>Metrics Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus Clowder configuration will automatically validate and configure the Quarkus Micrometer Prometheus extension.
All you need is to provide the metrics configuration in the clowder config file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="error">.</span><span class="error">.</span><span class="error">.</span>
  <span class="key"><span class="delimiter">&quot;</span><span class="content">metricsPath</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/metrics</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">metricsPort</span><span class="delimiter">&quot;</span></span>: <span class="integer">9000</span>,
  <span class="error">.</span><span class="error">.</span><span class="error">.</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A strong requirement to properly configure the Clowder metrics is to enable the HTTP management in port with the right root path:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">quarkus.management.enabled=true
quarkus.management.root-path=/</code></pre>
</div>
</div>
<div class="paragraph">
<p>These properties are build-time, so we can&#8217;t overwrite/autopopulate them at runtime. The Quarkus Clowder extension will validate that the above properties are set as expected and will throw an exception at runtime.</p>
</div>
<div class="paragraph">
<p>Finally, the metrics path will be listening on:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl localhost:9000/metrics</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources-manifests-generation-configuration"><a class="anchor" href="#resources-manifests-generation-configuration"></a>Resources Manifests Generation Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus Clowder configuration will generate the ClowdApp manifests to be installed on an OpenShift cluster.
By default, the Clowder manifests will be generated at the output folder <code>deploy/clowdapp.yaml</code> at build time.</p>
</div>
<div class="paragraph">
<p>This file will contain a OpenShift template resource with parameters and all the Clowd resources, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="head"><span class="head">---</span></span>
<span class="key">apiVersion</span>: <span class="string"><span class="content">template.openshift.io/v1</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">Template</span></span>
<span class="key">metadata</span>:
  <span class="key">name</span>: <span class="string"><span class="content">quarkus-clowder-integration-tests-resources</span></span>
<span class="key">objects</span>:
  - <span class="string"><span class="content">apiVersion: cloud.redhat.com/v1alpha1</span></span>
    <span class="key">kind</span>: <span class="string"><span class="content">ClowdApp</span></span>
    <span class="key">metadata</span>:
      <span class="key">labels</span>:
        <span class="key">label-a</span>: <span class="string"><span class="content">label-value-a</span></span>
      <span class="key">name</span>: <span class="string"><span class="content">quarkus-clowder-integration-tests-resources</span></span>
    <span class="key">spec</span>:
      <span class="key">deployments</span>:
        - <span class="string"><span class="content">name: service</span></span>
          <span class="key">podSpec</span>:
            <span class="key">image</span>: <span class="string"><span class="content">${IMAGE}:${IMAGE_TAG}</span></span>
          <span class="key">replicas</span>: <span class="string"><span class="content">1</span></span>
          <span class="key">webServices</span>:
            <span class="key">public</span>:
              <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">envName</span>: <span class="string"><span class="content">${ENV_NAME}</span></span>
<span class="key">parameters</span>:
  - <span class="string"><span class="content">name: ENV_NAME</span></span>
    <span class="key">value</span>: <span class="string"><span class="content">test-environment</span></span>
  - <span class="string"><span class="content">name: IMAGE</span></span>
    <span class="key">value</span>: <span class="string"><span class="content">quay.io/user/my-image</span></span>
  - <span class="string"><span class="content">name: IMAGE_TAG</span></span>
    <span class="key">value</span>: <span class="string"><span class="content">latest</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To generate the above manifests, it&#8217;s mandatory to set the pod image. So, either configure any of the Quarkus Container Image extensions to build one, or provide a container image to use via properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">quarkus.clowder.resources.image=quay.io/user/my-image:latest</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are many other options to tweak the generated resources, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">quarkus.clowder.resources.env-name=test-environment
quarkus.clowder.resources.labels.label-a=label-value-a</code></pre>
</div>
</div>
<div class="paragraph">
<p>To see all the options, go to the <a href="#configuration-reference">Configuration Reference</a>.</p>
</div>
<div class="paragraph">
<p>Another option is to provide an input Template resource that will be used to bootstrap the generated one. For doing this, you need to add a <code>clowdapp.yaml</code> at the <code>src/main/resources</code> folder.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reference"><a class="anchor" href="#configuration-reference"></a>Configuration Reference</h2>
<div class="sectionbody">
<div class="paragraph configuration-legend">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> Configuration property fixed at build time - All other configuration properties are overridable at runtime</p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-clowder_configuration"></a><a href="#quarkus-clowder_configuration">Configuration property</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-enabled">quarkus.clowder.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder extension.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-config-path"></a><code><a href="#quarkus-clowder_quarkus-clowder-config-path">quarkus.clowder.config-path</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Location of the clowder config file. The default location is provided either from the property <code>acg.config</code> which default path is <code>/cdapp/cdappconfig.json</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_CONFIG_PATH</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>${acg.config:/cdapp/cdappconfig.json}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-prefix"></a><code><a href="#quarkus-clowder_quarkus-clowder-prefix">quarkus.clowder.prefix</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Prefix where all the properties found at the <code>quarkus.clowder.config-path</code> location can be found.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_PREFIX</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>clowder.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-config-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-config-enabled">quarkus.clowder.config.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder feature.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_CONFIG_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-web-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-web-enabled">quarkus.clowder.web.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder feature.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_WEB_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-datasource-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-datasource-enabled">quarkus.clowder.datasource.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder feature.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_DATASOURCE_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-datasource-port"></a><code><a href="#quarkus-clowder_quarkus-clowder-datasource-port">quarkus.clowder.datasource.port</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Allow to overwrite the datasource port of the clowder config.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_DATASOURCE_PORT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-kafka-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-kafka-enabled">quarkus.clowder.kafka.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder feature.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_KAFKA_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-kafka-port"></a><code><a href="#quarkus-clowder_quarkus-clowder-kafka-port">quarkus.clowder.kafka.port</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Allow to overwrite the kafka port of the clowder config.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_KAFKA_PORT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-kafka-use-topic-name-from-property"></a><code><a href="#quarkus-clowder_quarkus-clowder-kafka-use-topic-name-from-property">quarkus.clowder.kafka.use-topic-name-from-property</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>When configuring a channel like <code>mp.messaging.incoming.prices.topic=${clowder.kafka.topics."platform.notifications.ingress".name}</code> In case the topic "platform.notifications.ingress" does not exist in Clowder configuration, then it will use "platform.notifications.ingress" as topic name.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_KAFKA_USE_TOPIC_NAME_FROM_PROPERTY</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-metrics-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-metrics-enabled">quarkus.clowder.metrics.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder feature.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_METRICS_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-enabled">quarkus.clowder.resources.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder feature.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-input-file"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-input-file">quarkus.clowder.resources.input-file</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The input file in which to place the user-defined ClowdApp template which will be used as inputs to populate the generated clowdapp.yaml. The file must contain a resource of type Template.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_INPUT_FILE</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>src/main/resources/clowdapp.yaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-output-file"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-output-file">quarkus.clowder.resources.output-file</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Allow to overwrite the kafka port of the clowder config.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_OUTPUT_FILE</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>deploy/clowdapp.yaml</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-env-name"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-env-name">quarkus.clowder.resources.env-name</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The name of the ClowdEnvironment providing the services.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_ENV_NAME</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-deployment-name"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-deployment-name">quarkus.clowder.resources.deployment-name</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The name of the deployment that will use the ClowdApp resource.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_DEPLOYMENT_NAME</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>service</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-replicas"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-replicas">quarkus.clowder.resources.replicas</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The number of replicas that the ClowdApp resource will use.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_REPLICAS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-image"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-image">quarkus.clowder.resources.image</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Image of the ClowdApp resource. If not provided, it will use the generated image from the Quarkus Container Image extensions. If there is no a Quarkus Container Image configured, it will fail.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_IMAGE</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-resources-labels-labels"></a><code><a href="#quarkus-clowder_quarkus-clowder-resources-labels-labels">quarkus.clowder.resources.labels</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Labels to be included in the generated ClowdApp resource.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_RESOURCES_LABELS</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,String&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-clowder_quarkus-clowder-kafka-topics-topics-configuration"></a><a href="#quarkus-clowder_quarkus-clowder-kafka-topics-topics-configuration">Topics configuration</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-kafka-topics-topics-name"></a><code><a href="#quarkus-clowder_quarkus-clowder-kafka-topics-topics-name">quarkus.clowder.kafka.topics."topics".name</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Name of the topic to use.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_KAFKA_TOPICS__TOPICS__NAME</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-clowder_quarkus-clowder-endpoints-allow-to-individually-configure-the-endpoints"></a><a href="#quarkus-clowder_quarkus-clowder-endpoints-allow-to-individually-configure-the-endpoints">Allow to individually configure the endpoints</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-endpoints-endpoints-enabled"></a><code><a href="#quarkus-clowder_quarkus-clowder-endpoints-endpoints-enabled">quarkus.clowder.endpoints."endpoints".enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable/Disable the clowder feature.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_ENDPOINTS__ENDPOINTS__ENABLED</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-endpoints-endpoints-client"></a><code><a href="#quarkus-clowder_quarkus-clowder-endpoints-endpoints-client">quarkus.clowder.endpoints."endpoints".client</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Fully qualified class matching the rest-client interface to configure.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_ENDPOINTS__ENDPOINTS__CLIENT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-endpoints-endpoints-hostname"></a><code><a href="#quarkus-clowder_quarkus-clowder-endpoints-endpoints-hostname">quarkus.clowder.endpoints."endpoints".hostname</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Allow to overwrite the hostname for the current endpoint.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_ENDPOINTS__ENDPOINTS__HOSTNAME</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-clowder_quarkus-clowder-endpoints-endpoints-port"></a><code><a href="#quarkus-clowder_quarkus-clowder-endpoints-endpoints-port">quarkus.clowder.endpoints."endpoints".port</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Allow to overwrite the port for the current endpoint.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code>QUARKUS_CLOWDER_ENDPOINTS__ENDPOINTS__PORT</code></p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-02-22 14:56:47 +0100
</div>
</div>
</body>
</html>